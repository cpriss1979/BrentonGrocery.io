<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Brenton‚Äôs Grocery List (Home Edition)</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 16 16%22><text y=%2214%22 font-size=%2214%22>üõí</text></svg>">

    <style>
  :root {
            --bg: #0b1b3a;
            --card: #1a3169;
            --ink: #f7f8ff;
            --muted: #9fb0df;
            --accent: #e8b8ff;
            --ok: #86e3ce;
            --danger: #a71c1c;   /* new red */
            --shadow: 0 16px 48px rgba(0, 0, 0, .35);
            --radius: 20px;
            --tap: 60px;
            --base: 20px;
            --emoji: 40px;
        }
        * {
            box-sizing: border-box
        }

        html,
        body {
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            background: var(--bg);
            color: var(--ink);
            font: 900 var(--base)/2 system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji", "Segoe UI Emoji";
            -webkit-tap-highlight-color: transparent;
        }

        .app {
            max-width: 930px;
            margin: 0 auto;
            padding: 0 16px;
        }

        header.section {
            padding: 1px 0 0;
            text-align: center;
            }

        .underline-title {
            margin: .02px 0 10px;
            padding: 0 0 22px;
            border-bottom: 5px dotted rgb(66, 190, 155);
            font-size: 1.8rem;
        }

        .section {
            padding: 0;
        }

        .row {
            padding: 28px
        }

        .card {
            background: var(--card);
            border: 5px solid rgba(255, 255, 255, .08);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            width: 98%;
            overflow: hidden;
        }

        .toolbar {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
            margin: 0 0 12px;
        }

        input[type="text"],
        input[type="number"],
        select {
            background: #0f1f43;
            color: var(--ink);
            border: 1px solid rgba(255, 255, 255, .2);
            padding: 12px 14px;
            border-radius: 14px;
            min-height: var(--tap);
            outline: none;
        }

        input::placeholder {
            color: var(--muted)
        }

        input[type="number"] {
            max-width: 120px
        }

        button,
        .btn {
            min-height: var(--tap);
            padding: 12px 19px;
            border-radius: 14px;
            border: 2px solid #000;
            background: #000;
            color: #fff;
            font-weight: 800;
            cursor: pointer;
            transition: transform .08s ease, opacity .2s ease;
        }

        .btn:hover {
            transform: translateY(-1px)
        }

        .ghost {
            background: transparent;
            border-color: rgba(255, 255, 255, 0.389);
            color: var(--ink)
        }

        .ok {
            background: var(--ok);
            color: #0a172f;
            border-color: #0a172f
        }

        .danger {
            background: var(--danger);
            border-color: #2b0000
        }

        .link {
            background: transparent;
            border: 0;
            color: var(--accent);
            text-decoration: underline;
            padding: 0
        }

        .quick {
            display: flex;
            flex-wrap: wrap;
            gap: 10px
        }

        .chip {
            background: #0f1f43;
            border: 1px solid rgba(255, 255, 255, .15);
            border-radius: 999px;
            padding: 12px 16px;
            cursor: pointer;
            font-weight: 800;
        }

        form.add-row {
            display: grid;
            grid-template-columns: 1fr 1fr 130px auto;
            gap: 10px;
            margin: 16px 0;
            /* space above lists */
        }

        .lists {
            display: grid;
            gap: 0px
        }

        ul {
            list-style: none;
            margin: 0;
            padding: 0
        }

        li.item {
            display: grid;
            grid-template-columns: 64px 1fr auto;
            gap: 14px;
            align-items: center;
            padding: 14px;
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, .08);
            background: #2d4376;
        }

        li.item+li.item {
            margin-top: 12px
        }

        .it-emoji {
            font-size: var(--emoji);
            text-align: center
        }

        .it-name {
            display: flex;
            flex-direction: column;
            gap: 6px
        }

        .it-name .line {
            display: flex;
            align-items: center;
            gap: 14px
        }

        .it-name input[type="checkbox"] {
            transform: scale(1.5);
            accent-color: var(--accent)
        }

        .it-name span {
            font-size: calc(var(--base)*1.05)
        }

        .strike {
            opacity: .6;
            text-decoration: line-through
        }

        .qty-wrap {
            display: flex;
            gap: 10px;
            align-items: center
        }

        .qty-wrap input {
            width: 90px;
            text-align: center
        }

        .empty {
            color: var(--muted);
            text-align: center;
            padding: 18px 8px
        }

        footer {
            opacity: .75;
            font-weight: 600;
            padding: 18px 0 28px;
            text-align: center;
            color: rgb(135, 239, 210);
        }

        /* Phone readability */
        @media (max-width:430px) {
            :root {
                --base: 22px !important;
                --emoji: 46px !important;
                --tap: 64px !important;
            }

            .row {
                padding: 20px !important
            }

            .toolbar input,
            .toolbar select,
            .toolbar button {
                font-size: 1rem !important
            }

            .chip {
                font-size: 1rem;
                padding: 14px 18px !important
            }

            li.item {
                grid-template-columns: 72px 1fr auto;
                padding: 18px !important
            }

            .it-name span {
                font-size: 1.25rem !important
            }

            .qty-wrap .btn {
                font-size: 1.1rem;
                padding: 14px 16px !important
            }

            .qty-wrap input.qty {
                width: 110px;
                font-size: 1.1rem !important
            }
        }

        /* Slight bumps by default */
        #addForm select,
        #addForm input,
        #addForm button {
            font-size: 1.05rem
        }

        .it-emoji {
            font-size: 48px
        }

        /* ---------- current css phone override --------- */
        /* 1) Let cards show their contents on phone */
        @media (max-width: 430px) {
            .card {
                overflow: visible;
            }
        }

        /* 2) Make list rows shrink correctly (prevents right-side clipping) */
        li.item {
            /* name column can actually shrink now */
            grid-template-columns: 0px minmax(0, 1fr) auto;
        }

        /* 3) Keep long item names from forcing overflow */
        .it-name span {
            overflow-wrap: anywhere;
            /* allow wrapping */
        }

        /* 4) Add-form that fits on phones */
        @media (max-width: 430px) {
            form.add-row {
                grid-template-columns: 1fr 1fr;
                gap: 10px;
            }

            /* name spans full width; qty stays compact */
            #name {
                grid-column: 1 / -1;
            }

            #qty {
                max-width: 96px;
            }
        }

        /* 5) Qty controls don‚Äôt squeeze off screen */
        .qty-wrap {
            flex-wrap: nowrap;
        }

        .qty-wrap .btn,
        .qty-wrap .qty {
            flex: 0 0 auto;
        }

        /* 6) A tiny bit more page padding on narrow screens */
        @media (max-width: 430px) {
            .app {
                padding: 0 10px;
            }

            .row {
                padding: 20px;
            }

            /* you already use something like this */
        }

        /* Stop the weird letter-per-line wrapping */
        .it-name {
            min-width: 0;
        }

        .it-name span {
            overflow-wrap: break-word;
            /* allow normal word wrapping */
            word-break: normal;
            white-space: normal;
        }

        /* On small screens, put NAME on top, emoji under it, controls on the right */
        @media (max-width: 430px) {
            li.item {
                /* turn the row into a 2-column grid with named areas */
                display: grid;
                grid-template-columns: 1fr auto;
                grid-template-areas:
                    "name actions"
                    "emoji actions";
                align-items: start;
                column-gap: 14px;
            }
        }

        /* Keep rows shrinkable so they don't clip */
        li.item {
            grid-template-columns: 56px minmax(0, 1fr) auto;
        }


        .it-name {
            grid-area: name;
        }

        .it-emoji {
            grid-area: emoji;
            text-align: left;
            /* or center if you prefer */
            margin-top: .25rem;
        }

        .qty-wrap {
            grid-area: actions;
            justify-self: end;
        }

        /* === Item card layout: Name (top) ‚Üí Category+Emoji (middle) ‚Üí Actions (bottom) === */
        li.item {
            display: grid;
            grid-template-areas:
                "title"
                "meta"
                "actions";
            grid-template-columns: 1fr;
            gap: 10px;
            padding: 14px;
            /* already there; keep comfy */
        }

        /* Title (name) */
        .it-title {
            grid-area: title;
            font-weight: 800;
            font-size: 1.15rem;
            line-height: 1.25;
            word-break: normal;
            overflow-wrap: anywhere;
        }

        /* Middle meta row */
        .it-meta {
            grid-area: meta;
            display: flex;
            align-items: center;
            gap: 12px;
            color: var(--muted);
        }

        .it-emoji {
            font-size: var(--emoji);
        }

        .it-cat {
            font-weight: 700;
            letter-spacing: .2px;
        }

        /* Bottom controls */
        .it-actions {
            grid-area: actions;
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
            /* wrap nicely on small screens */
        }

        .it-actions .toggle {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 700;
        }

        .it-actions .qty-wrap {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .it-actions .qty {
            width: 90px;
            text-align: center;
        }

        /* Make sure old grid rules don‚Äôt fight us */
        .it-name {
            min-width: 0;
        }

        /* keeps long names from vertical-wrapping */


        /* ----- container centering ---------- */
        /* Center all text inside this box */
        .card.list {
            text-align: center;
        }

        /* But keep list rows themselves left-aligned */
        .card.list .item {
            text-align: left;
        }

        /* -------- continer centering #2 --------- */
        .toolbar {
            justify-content: center;
        }

        /* -------- center container ----------- */
        /* Works when the container has a width */
        .app,
        .row.card,
        .card.list {
            margin-left: auto;
            margin-right: auto;
        }

        /* chips + form + ‚ÄúHide purchased‚Äù card */
        .row.card {
            margin-bottom: 18px;
        }

        /* try 24‚Äì32px */

        /* ---------- quick overrides ---------- */
        /* ===== Tighten section headers (To Buy / Purchased) ===== */
        .lists {
            margin-top: 8px;
            gap: 12px;
        }

        /* less space between the two cards */
        .card.list {
            padding: 10px 12px;
        }

        /* less inner padding of each card */
        
        /* If the gap between the top card (chips/form/hide) and lists is still big: */
        .section+.section {
            margin-top: 8px !important;
        }

        /* shrink the gap between sections */

        /* ===== Make each item row compact & stacked nicely ===== */
        li.item {
            /* smaller padding and tighter vertical spacing */
            padding: 10px 12px;
            row-gap: 6px;
            /* vertical gaps between stacked areas */
            column-gap: 10px;
            /* keep your two-column layout or the mobile grid you added; this works with both */
        }

        /* Top line: item name */
        .it-title {
            margin: 0 0 2px;
            font-weight: 800;
        }

        /* Middle line: emoji + category */
        .it-meta {
            display: flex;
            align-items: center;
            gap: 6px;
            margin: 0 0 6px;
        }

        .it-emoji {
            line-height: 1;
        }

        /* keeps the emoji from adding extra height */
        .it-cat {
            opacity: .9;
        }

        /* Bottom line: purchased toggle + quantity cluster + delete */
        .it-actions {
            display: flex;
            align-items: center;
            justify-content: space-between;
            /* toggle left, qty middle, delete right */
            gap: 8px;
            margin: 0;
        }

        .it-actions .toggle {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        /* Quantity controls ‚Äì smaller but tappable */
        .qty-wrap {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .qty-wrap .btn {
            padding: 6px 10px;
            min-height: 40px;
        }

        .qty-wrap input.qty {
            width: 72px;
            height: 40px;
            text-align: center;
        }

        /* Optional: even tighter on small phones */
        @media (max-width:430px) {
            .card.list {
                padding: 8px 10px;
            }

            .card.list h2 {
                margin: 1px 0 0px;
            }

            li.item {
                padding: 8px 10px;
                row-gap: 4px;
            }

            .it-meta {
                margin-bottom: 4px;
            }

            .qty-wrap .btn {
                padding: 6px 8px;
                min-height: 36px;
            }

            .qty-wrap input.qty {
                width: 64px;
                height: 36px;
            }
        }

        /* ---------- make 'x'' side/side ----------- */
        /* In case any old emoji nodes exist, hide them */
        .it-emoji {
            display: none !important;
        }

        /* Each block spans full width of the item card */
        .it-title,
        .it-meta,
        .it-actions {
            grid-column: 1 / -1;
        }

        /* Top line: name */
        .it-title {
            font-weight: 800;
            margin: 0 0 4px;
        }

        /* Middle line: just the category (no emoji) */
        .it-meta {
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 0 0 6px;
        }

        .it-cat {
            opacity: .9;
        }

        /* Bottom line: toggle + qty cluster */
        .it-actions {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
        }

        /* Quantity cluster: put √ó right beside the number */
        .qty-wrap {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .qty-wrap .qty {
            width: 72px;
            height: 36px;
            text-align: center;
        }

        .qty-wrap .btn {
            min-height: 36px;
            padding: 6px 10px;
        }

        .qty-wrap .btn.sm {
            padding: 6px 10px;
        }

        /* Slightly tighter list rows */
        li.item {
            padding: 10px 12px;
            row-gap: 6px;
        }

        @media (max-width: 430px) {
            .it-title {
                margin-bottom: 2px;
            }

            .it-meta {
                gap: 6px;
                margin-bottom: 4px;
            }

            li.item {
                padding: 8px 10px;
                row-gap: 4px;
            }

            .qty-wrap .qty {
                width: 64px;
                height: 34px;
            }

            .qty-wrap .btn {
                min-height: 34px;
            }
        }

        /* ------------- override name and type of entry ----------------- */
        /* Put name on the left and category on the right (same row) */
        li.item {
            display: grid;
            grid-template-columns: 1fr auto;
            /* name grows, cat hugs right */
            grid-template-areas:
                "title cat"
                "actions actions";
            /* controls on the next row */
            column-gap: 12px;
            row-gap: 6px;
            align-items: center;
        }

        .it-title {
            grid-area: title;
            min-width: 0;
            overflow-wrap: break-word;
        }

        .it-meta {
            grid-area: cat;
            justify-self: end;
        }

        .it-meta .it-cat {
            opacity: .85;
            font-weight: 600;
        }

        /* optional: a touch tighter on small phones */
        @media (max-width:430px) {
            li.item {
                column-gap: 10px;
                row-gap: 4px;
            }
        }

        /* --------------- override text between buy/purchsed -------------- */
    .card.list {
        color: black;
        background-color: rgb(66, 190, 155);
        border: 2.7px solid white;
    }
    /* ----------- (clear) text css ----------- */
    #clearPurchased {
  font-size: .75em;   /* bigger than the h2‚Äôs text size */
  font-weight: 700;    /* optional: make it bolder */
  margin-left: .25rem; /* tiny gap from ‚ÄúPurchased‚Äù */
color: rgba(255, 0, 0, 0.754)
}

/* --------------- override blue boxes for to buy/ purchased -------- */
/* theme knobs */
:root{
  --row: #2d4376;         /* current medium blue */
  --rowBorder: rgba(255,255,255,.12);
  --qtyBg: #314a85;       /* qty pill bg */
  --qtyText: #eaf0ff;     /* qty text color */
}

/* the item ‚Äúboxes‚Äù */
li.item{
  background: var(--row) !important;
  border-color: var(--rowBorder) !important;
}

/* make the qty controls their own color (optional) */
.qty-wrap .btn,
.qty-wrap .qty{
  background: var(--qtyBg);
  border-color: var(--qtyBg);
  color: var(--qtyText);
  border:1.2px solid rgba(156, 142, 142, 0.322)
}
.qty-wrap .btn:hover{ filter: brightness(1.08); }
</style>      
<head>       
<body>
    <div class="app">
        <h1 class="underline-title"></h1>
        <header class="section">
            <h1 class="underline-title">Brenton‚Äôs Grocery List (Home Edition)</h1>
        </header>

        <!-- TOP CARD: chips + form + hide purchased -->
        <div class="section">
            <div class="row card">

                <div class="quick" id="quick">
                    <button class="chip" data-name="Eggs" data-cat="Dairy">ü•ö Eggs</button>
                    <button class="chip" data-name="Milk" data-cat="Dairy">ü•õ Milk</button>
                    <button class="chip" data-name="Bread" data-cat="Bakery">üçû Bread</button>
                    <button class="chip" data-name="Apples" data-cat="Produce">üçé Apples</button>
                    <button class="chip" data-name="Chicken" data-cat="Protein">üçó Chicken</button>
                    <button class="chip" data-name="Soda" data-cat="Beverages">ü•§ Soda</button>
                    <button class="chip" data-name="Toilet Paper" data-cat="Household">üßª Toilet Paper</button>
                    <button class="chip" data-name="Candy" data-cat="Candy">üç´ Candy</button>
                </div>

                <form id="addForm" class="add-row" autocomplete="off">
                    <select id="cat" title="Category" required>
                        <option value="" disabled selected hidden>Select category‚Ä¶</option>
                        <option>Produce</option>
                        <option>Bakery</option>
                        <option>Dairy</option>
                        <option>Protein</option>
                        <option>Pantry</option>
                        <option>Frozen</option>
                        <option>Household</option>
                        <option>Snacks</option>
                        <option>Beverages</option>
                        <option>Candy</option>
                        <option>Other</option>
                    </select>

                    <input id="name" type="text" placeholder="Add an item (e.g., Cereal)‚Ä¶" required>
                    <input id="qty" type="number" min="1" value="1" title="Qty">
                    <button class="ok" type="submit">Add</button>
                </form>

                <div class="toolbar">
                    <label><input id="hidePurchased" type="checkbox"> Hide purchased</label>
                    <!-- (No Share button) -->
                </div>
            </div>
        </div>
        <!-- LISTS -->
        <div class="section">
            <div class="lists">
                <div class="card list">
                    <h2>üßæ To Buy</h2></div>
                    <ul id="todo"></ul>
                    <div id="emptyTodo" class="empty" style="display:none">Nothing here. Add something above üëÜ</div>

                    <div class="card list">
                        <h2>
                            ‚úÖ Purchased
                            <button id="clearPurchased" class="link">
                                (<span class="clear-text">clear</span>)
                            </button>
                        </h2>
                          </div>
                    <ul id="done"></ul>
                    <div id="emptyDone" class="empty" style="display:none">No purchased items yet.</div>
                </div>

                <footer>Tip: tap a ‚Äúbutton‚Äù to auto-add fast. Everything saves locally on this phone.</footer>
    </div>

    <script>
        /* ---------------- Emoji per category ---------------- */
        const EMOJI_MAP = {
            Produce: "üçé", Bakery: "üçû", Dairy: "ü•õ", Protein: "üçó", Pantry: "ü•´",
            Frozen: "üßä", Household: "üßª", Snacks: "üç™", Beverages: "ü•§", Candy: "üç´", Other: "üõí"
        };
        const emFor = cat => EMOJI_MAP[cat] || EMOJI_MAP.Other;

        /* ---------------- Local storage ---------------- */
        const STORAGE_KEY = "brenton-grocery-v4";
        let state = { items: [] };

        const load = () => {
            try {
                const raw = localStorage.getItem(STORAGE_KEY);
                if (!raw) return;
                const data = JSON.parse(raw);
                if (Array.isArray(data.items)) state.items = data.items;
            } catch (e) { console.warn("load error", e); }
        };
        const save = () => localStorage.setItem(STORAGE_KEY, JSON.stringify(state));

        /* ---------------- DOM helpers ---------------- */
        const $ = (sel, root = document) => root.querySelector(sel);
        const on = (el, ev, fn) => el && el.addEventListener(ev, fn);

        const els = {
            hidePurchased: $("#hidePurchased"),
            addForm: $("#addForm"),
            name: $("#name"),
            qty: $("#qty"),
            cat: $("#cat"),
            todo: $("#todo"),
            done: $("#done"),
            emptyTodo: $("#emptyTodo"),
            emptyDone: $("#emptyDone"),
            clearPurchased: $("#clearPurchased"),
            quick: $("#quick"),
            // search is optional; render() tolerates it being null
            search: $("#search")
        };

        /* ---------------- Item helpers ---------------- */
        const uid = () => Date.now().toString(36) + Math.random().toString(36).slice(2, 8);
        const tcase = s => String(s || "").replace(/\s+/g, " ").trim().replace(/\b\w/g, m => m.toUpperCase());

        function addItem({ name, qty, cat }) {
            const it = {
                id: uid(),
                emoji: emFor(cat),
                name: tcase(name),
                qty: Math.max(1, Number(qty || 1)),
                cat: cat || "Other",
                checked: false,
                created: Date.now()
            };
            state.items.push(it);
            save(); render();
        }

        function updateItem(id, patch) {
            const it = state.items.find(i => i.id === id);
            if (!it) return;
            Object.assign(it, patch);
            save(); render();
        }

        function deleteItem(id) {
            state.items = state.items.filter(i => i.id !== id);
            save(); render();
        }

        function clearPurchased() {
            state.items = state.items.filter(i => !i.checked);
            save(); render();
        }

        /* ---------------- Row renderer ---------------- */
        function row(it) {
            const li = document.createElement("li");
            li.className = "item";
            li.innerHTML = `
                  <div class="it-title">${it.name}</div>
            
                  <div class="it-meta">
                    <span class="it-emoji">${it.emoji}</span>
                    <small class="it-cat">${it.cat}</small>
                  </div>
            
                  <div class="it-actions">
                    <label class="toggle">
                      <input type="checkbox" ${it.checked ? "checked" : ""} data-role="toggle">
                      <span>Purchased</span>
                    </label>
            
                    <div class="qty-wrap">
                      <button class="btn ghost" data-role="minus">‚àí</button>
                      <input class="qty" type="number" min="1" value="${it.qty}" data-role="qty">
                      <button class="btn ghost" data-role="plus">Ôºã</button>
                    </div>
            
                    <button class="btn danger" data-role="del">‚úï</button>
                  </div>
                `;

            const q = sel => li.querySelector(sel);
            on(q('[data-role="toggle"]'), 'change', e => updateItem(it.id, { checked: e.target.checked }));
            on(q('[data-role="minus"]'), 'click', () => updateItem(it.id, { qty: Math.max(1, it.qty - 1) }));
            on(q('[data-role="plus"]'), 'click', () => updateItem(it.id, { qty: it.qty + 1 }));
            on(q('[data-role="qty"]'), 'change', e => updateItem(it.id, { qty: Math.max(1, Number(e.target.value || 1)) }));
            on(q('[data-role="qty"]'), 'input', e => updateItem(it.id, { qty: Math.max(1, Number(e.target.value || 1)) })); // live sync while typing
            on(q('[data-role="del"]'), 'click', () => deleteItem(it.id));

            return li;
        }

        /* ---------------- Render lists ---------------- */
        function render() {
            const qtxt = (els.search?.value || "").trim().toLowerCase();
            const hideDone = !!els.hidePurchased?.checked;

            const match = it =>
                !qtxt ||
                it.name.toLowerCase().includes(qtxt) ||
                it.emoji.includes(qtxt) ||
                (it.cat || "").toLowerCase().includes(qtxt);

            const sort = (a, b) =>
                (a.cat || "").localeCompare(b.cat || "") || a.name.localeCompare(b.name);

            const todo = state.items.filter(i => !i.checked).filter(match).sort(sort);
            const done = state.items.filter(i => i.checked).filter(match).sort(sort);

            els.todo.innerHTML = "";
            els.done.innerHTML = "";

            todo.forEach(it => els.todo.appendChild(row(it)));
            els.emptyTodo.style.display = todo.length ? "none" : "block";

            els.done.parentElement.style.display = hideDone ? "none" : "";
            if (!hideDone) {
                done.forEach(it => els.done.appendChild(row(it)));
                els.emptyDone.style.display = done.length ? "none" : "block";
            }
        }

        /* ---------------- Events ---------------- */
        on(els.quick, 'click', (e) => {
            const btn = e.target.closest(".chip");
            if (!btn) return;
            addItem({ name: btn.dataset.name, qty: 1, cat: btn.dataset.cat });
        });

        on(els.addForm, 'submit', (e) => {
            e.preventDefault();
            if (!els.cat.value) { alert("Pick a category first üôÇ"); return; }
            addItem({ name: els.name.value, qty: els.qty.value, cat: els.cat.value });
            els.name.value = "";
            els.qty.value = 1;
            els.name.focus();
        });

        on(els.hidePurchased, 'change', render);
        on(els.clearPurchased, 'click', (e) => { e.preventDefault(); clearPurchased(); });
        on(els.search, 'input', render); // harmless if #search is missing

        /* ---------------- Init ---------------- */
        load();
        render();
    </script>
    
    </body>
    </head>
    </html>